<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart College Timetable Management System</title>

    <link rel="stylesheet" href="style.css">
</head>

<body>

    <!-- LOGIN PAGE -->
    <div id="loginPage" class="login-container">
        <div class="login-box">
            <div class="login-header">
                <h1>üìö Smart Timetable System</h1>
                <p>College Management Portal</p>
            </div>

            <div class="role-buttons">
                <button class="role-btn" onclick="selectRole('student')">üë®‚Äçüéì Student</button>
                <button class="role-btn" onclick="selectRole('teacher')">üë®‚Äçüè´ Teacher</button>
                <button class="role-btn" onclick="selectRole('admin')">üë®‚Äçüíº Admin</button>
            </div>

            <!-- Login Form -->
            <div id="loginForm">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="loginEmail" placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="loginPassword" placeholder="Enter your password">
                </div>
                <button class="btn-primary" onclick="handleLogin()">Login</button>
                <div class="toggle-form">
                    Don't have an account? <a onclick="toggleForms()">Register here</a>
                </div>
            </div>

            <!-- Register Form -->
            <div id="registerForm" style="display: none;">
                <div class="form-group">
                    <label>Full Name</label>
                    <input type="text" id="registerName" placeholder="Enter your full name">
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="registerEmail" placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="registerPassword" placeholder="Create a password">
                </div>

                <!-- STUDENT BATCH SELECTION (Only for Students) -->
                <div class="form-group" id="batchSelectRegister" style="display: none;">
                    <label>Select Batch</label>
                    <select id="registerBatch">
                        <option value="">Select Batch</option>
                        <option value="2022">2022</option>
                        <option value="2023">2023</option>
                        <option value="2024">2024</option>
                        <option value="2025">2025</option>
                    </select>
                </div>

                <button class="btn-primary" onclick="handleRegister()">Register</button>
                <div class="toggle-form">
                    Already have an account? <a onclick="toggleForms()">Login here</a>
                </div>
            </div>
        </div>
    </div>

    <!-- MAIN APP -->
    <div id="appContainer" class="app-container">
        <!-- Header -->
        <div class="app-header">
            <div>
                <h1>üìö Smart Timetable Manager</h1>
            </div>
            <div class="user-info">
                <span class="user-badge" id="userBadge">Student</span>
                <span id="userName" style="font-weight: 600;"></span>
                <button class="btn-logout" onclick="handleLogout()">Logout</button>
            </div>
        </div>

        <!-- Current Time -->
        <div class="current-time" id="currentTime"></div>

        <!-- Alert Box -->
        <div class="alert-box" id="alertBox">
            <strong>‚è∞ Upcoming Class Alert!</strong>
            <div id="alertMessage"></div>
        </div>

        <!-- STUDENT UI -->
        <div id="studentUI" style="display: none;">
            <div class="tabs">
                <button class="tab active" onclick="switchStudentTab('today')">üìÖ TODAY</button>
                <button class="tab" onclick="switchStudentTab('week')">üìÜ WEEK</button>
            </div>

            <div id="studentTodayTab" class="tab-content active">
                <div class="card">
                    <h2>Today's Classes</h2>
                    <div id="studentTodayList"></div>
                </div>
            </div>

            <div id="studentWeekTab" class="tab-content">
                <div class="card">
                    <h2>Weekly Schedule</h2>
                    <div class="day-buttons">
                        <button class="day-btn" onclick="showStudentDay('Monday')">Monday <span id="monCount"></span></button>
                        <button class="day-btn" onclick="showStudentDay('Tuesday')">Tuesday <span id="tueCount"></span></button>
                        <button class="day-btn" onclick="showStudentDay('Wednesday')">Wednesday <span id="wedCount"></span></button>
                        <button class="day-btn" onclick="showStudentDay('Thursday')">Thursday <span id="thuCount"></span></button>
                        <button class="day-btn" onclick="showStudentDay('Friday')">Friday <span id="friCount"></span></button>
                    </div>
                    <div id="studentDayList"></div>
                </div>
            </div>
        </div>

        <!-- TEACHER UI -->
        <div id="teacherUI" style="display: none;">

            <!-- TEACHER BATCH SELECTION -->
            <div id="teacherBatchSelect" class="batch-selection-container">
                <div class="batch-card" onclick="selectTeacherBatch('2022')">Batch 2022</div>
                <div class="batch-card" onclick="selectTeacherBatch('2023')">Batch 2023</div>
                <div class="batch-card" onclick="selectTeacherBatch('2024')">Batch 2024</div>
                <div class="batch-card" onclick="selectTeacherBatch('2025')">Batch 2025</div>
            </div>

            <!-- SELECTED BATCH HEADER -->
            <h2 id="teacherBatchHeader" class="selected-batch-title" style="display:none;"></h2>
            <button id="changeBatchBtn" class="secondary-btn" style="display:none;" onclick="changeTeacherBatch()">Change Batch</button>

            <div class="tabs">
                <button class="tab active" onclick="switchTeacherTab('today')">üìÖ TODAY</button>
                <button class="tab" onclick="switchTeacherTab('week')">üìÜ WEEK</button>
                <button class="tab" onclick="switchTeacherTab('extra')">‚ûï EXTRA CLASS</button>
            </div>

            <div id="teacherTodayTab" class="tab-content active">
                <div class="card">
                    <h2>Today's Classes</h2>
                    <div id="teacherTodayList"></div>
                </div>
            </div>

            <div id="teacherWeekTab" class="tab-content">
                <div class="card">
                    <h2>Weekly Schedule</h2>
                    <div class="day-buttons">
                        <button class="day-btn" onclick="showTeacherDay('Monday')">Monday</button>
                        <button class="day-btn" onclick="showTeacherDay('Tuesday')">Tuesday</button>
                        <button class="day-btn" onclick="showTeacherDay('Wednesday')">Wednesday</button>
                        <button class="day-btn" onclick="showTeacherDay('Thursday')">Thursday</button>
                        <button class="day-btn" onclick="showTeacherDay('Friday')">Friday</button>
                    </div>
                    <div id="teacherDayList"></div>
                </div>
            </div>

            <div id="teacherExtraTab" class="tab-content">
                <div class="card">
                    <h2>Add Extra Class</h2>
                    <form id="extraClassForm">
                        <div class="form-group">
                            <label>Day (Future only)</label>
                            <select id="extraDay" required>
                                <option value="">Select Day</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Class Name</label>
                            <input type="text" id="extraName" required>
                        </div>
                        <div class="form-group">
                            <label>Start Time</label>
                            <input type="time" id="extraStart" required>
                        </div>
                        <div class="form-group">
                            <label>End Time</label>
                            <input type="time" id="extraEnd" required>
                        </div>
                        <div class="form-group">
                            <label>Room</label>
                            <input type="text" id="extraRoom" required>
                        </div>
                        <div class="form-group">
                            <label>Type</label>
                            <select id="extraType">
                                <option>Lecture</option>
                                <option>Lab</option>
                                <option>Tutorial</option>
                                <option>Seminar</option>
                            </select>
                        </div>
                        <button type="submit" class="btn-primary">Add Extra Class</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- ADMIN UI -->
        <div id="adminUI" style="display: none;">

            <!-- ADMIN BATCH FILTER -->
            <div id="adminBatchSelect" class="batch-selection-container">
                <div class="batch-card" onclick="selectAdminBatch('2022')">2022</div>
                <div class="batch-card" onclick="selectAdminBatch('2023')">2023</div>
                <div class="batch-card" onclick="selectAdminBatch('2024')">2024</div>
                <div class="batch-card" onclick="selectAdminBatch('2025')">2025</div>
                <div class="batch-card" onclick="selectAdminBatch(null)">Show All</div>
            </div>

            <div class="tabs">
                <button class="tab active" onclick="switchAdminTab('dashboard')">üìä DASHBOARD</button>
                <button class="tab" onclick="switchAdminTab('data')">üíæ DATA</button>
            </div>

            <div id="adminDashboardTab" class="tab-content active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="totalClasses">0</div>
                        <div class="stat-label">Total Classes</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="todayClasses">0</div>
                        <div class="stat-label">Today's Classes</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="nextClass">--</div>
                        <div class="stat-label">Next Class</div>
                    </div>
                </div>

                <div class="card">
                    <h2>Classes per Day</h2>
                    <div class="chart-container" id="classChart"></div>
                </div>

                <div class="card">
                    <h2>Manage Timetable</h2>
                    <button class="btn-primary" onclick="openModifyModal()">Modify Classes</button>
                </div>
            </div>

            <div id="adminDataTab" class="tab-content">
                <div class="card">
                    <h2>Data Management</h2>
                    <button class="btn-primary" onclick="exportData()" style="margin-bottom: 10px;">üì• Export Data</button>
                    <button class="btn-primary" onclick="importData()" style="margin-bottom: 10px;">üì§ Import Data</button>
                    <button class="btn-primary" onclick="resetAllData()" style="background: #ff6b6b;">üóëÔ∏è Reset All Data</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modify Classes Modal -->
    <div id="modifyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 style="color: #667eea;">Modify Classes</h2>
                <button class="close-modal" onclick="closeModifyModal()">√ó</button>
            </div>
            
            <div style="margin-bottom: 20px;">
                <button class="btn-primary" onclick="showAddClassForm()">‚ûï Add New Class</button>
            </div>

            <div id="addClassForm" style="display: none; margin-bottom: 20px; padding: 20px; background: #f8f9fa; border-radius: 10px;">
                <h3 style="margin-bottom: 15px;">Add New Class</h3>
                <div class="form-group">
                    <label>Class Name</label>
                    <input type="text" id="newClassName">
                </div>
                <div class="form-group">
                    <label>Day</label>
                    <select id="newClassDay">
                        <option>Monday</option>
                        <option>Tuesday</option>
                        <option>Wednesday</option>
                        <option>Thursday</option>
                        <option>Friday</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Start Time</label>
                    <input type="time" id="newClassStart">
                </div>
                <div class="form-group">
                    <label>End Time</label>
                    <input type="time" id="newClassEnd">
                </div>
                <div class="form-group">
                    <label>Teacher</label>
                    <input type="text" id="newClassTeacher">
                </div>
                <div class="form-group">
                    <label>Room</label>
                    <input type="text" id="newClassRoom">
                </div>
                <div class="form-group">
                    <label>Type</label>
                    <select id="newClassType">
                        <option>Lecture</option>
                        <option>Lab</option>
                        <option>Tutorial</option>
                        <option>Seminar</option>
                    </select>
                </div>
                <button class="btn-primary" onclick="addNewClass()">Add Class</button>
            </div>

            <div id="classList"></div>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification"></div>

    <!-- External JS -->
    <script src="script.js"></script>

</body>
</html>
